# JSON5 â€“ ä¸ºäººç±»è®¾è®¡çš„ JSON

[![æ„å»ºçŠ¶æ€](https://app.travis-ci.com/json5/json5.svg?branch=main)][æ„å»ºçŠ¶æ€] [![è¦†ç›–ç‡çŠ¶æ€](https://coveralls.io/repos/github/json5/json5/badge.svg)][è¦†ç›–ç‡çŠ¶æ€]

JSON5 æ˜¯å¯¹æµè¡Œçš„ [JSON] æ–‡ä»¶æ ¼å¼çš„æ‰©å±•ï¼Œæ—¨åœ¨æ›´æ˜“äº**æ‰‹åŠ¨ç¼–å†™å’Œç»´æŠ¤**ï¼ˆä¾‹å¦‚ç”¨äºé…ç½®æ–‡ä»¶ï¼‰ã€‚å®ƒ**ä¸é€‚ç”¨äº**æœºå™¨ä¹‹é—´çš„é€šä¿¡ï¼ˆå¯¹äºè¿™ç§æƒ…å†µï¼Œè¯·ç»§ç»­ä½¿ç”¨ JSON æˆ–å…¶ä»–æ–‡ä»¶æ ¼å¼ã€‚ğŸ™‚ï¼‰

JSON5 é¡¹ç›®å§‹äº 2012 å¹´ï¼Œæˆªè‡³ 2022 å¹´ï¼Œæ¯å‘¨ä¸‹è½½é‡å·²è¶…è¿‡ **[6500 ä¸‡æ¬¡](https://www.npmjs.com/package/json5)**ï¼Œåœ¨ npm ä¸Šæ‰€æœ‰ä¾èµ–åŒ…ä¸­æ’åå‰ **[0.1%](https://gist.github.com/anvaka/8e8fa57c7ee1350e3491)**ï¼Œå¹¶å·²è¢« **[Chromium](https://source.chromium.org/chromium/chromium/src/+/main:third_party/blink/renderer/platform/runtime_enabled_features.json5;drc=5de823b36e68fd99009a29281b17bc3a1d6b329c)ã€[Next.js](https://github.com/vercel/next.js/blob/b88f20c90bf4659b8ad5cb2a27956005eac2c7e8/packages/next/lib/find-config.ts#L43-L46)ã€[Babel](https://babeljs.io/docs/en/config-files#supported-file-extensions)ã€[Retool](https://community.retool.com/t/i-am-attempting-to-append-several-text-fields-to-a-google-sheet-but-receiving-a-json5-invalid-character-error/7626)ã€[WebStorm](https://www.jetbrains.com/help/webstorm/json.html) ç­‰ä¸»æµé¡¹ç›®é‡‡ç”¨**ï¼Œå®Œæ•´åˆ—è¡¨è§ [In the Wild](https://github.com/json5/json5/wiki/In-the-Wild)ã€‚Apple çš„å¹³å°ï¼ˆå¦‚ **macOS** å’Œ **iOS**ï¼‰ä¹ŸåŸç”Ÿæ”¯æŒ JSON5ï¼Œè¯¦è§ **[Apple æ–‡æ¡£](https://developer.apple.com/documentation/foundation/jsondecoder/3766916-allowsjson5)**ã€‚

å½¢å¼ä¸Šï¼Œ**[JSON5 æ•°æ®äº¤æ¢æ ¼å¼](https://spec.json5.org/)** æ˜¯ JSON çš„è¶…é›†ï¼ˆå› æ­¤æ‰€æœ‰åˆæ³•çš„ JSON æ–‡ä»¶å§‹ç»ˆæ˜¯åˆæ³•çš„ JSON5 æ–‡ä»¶ï¼‰ï¼Œå…¶è¯­æ³•æ‰©å±•äº†éƒ¨åˆ† [ECMAScript 5.1] (ES5) çš„ç‰¹æ€§ã€‚å®ƒä¹Ÿæ˜¯ ES5 çš„*å­é›†*ï¼Œå› æ­¤æ‰€æœ‰åˆæ³•çš„ JSON5 æ–‡ä»¶ä¹Ÿå§‹ç»ˆæ˜¯åˆæ³•çš„ ES5 æ–‡ä»¶ã€‚[\*](#ecmascript-å…¼å®¹æ€§)

æœ¬ JavaScript åº“æ˜¯ JSON5 è§£æä¸åºåˆ—åŒ–çš„å‚è€ƒå®ç°ï¼Œè¢«ä¸Šè¿°è®¸å¤šæµè¡Œé¡¹ç›®ç›´æ¥ä½¿ç”¨ï¼ˆä¾‹å¦‚åœ¨å¯¹æ€§èƒ½è¦æ±‚ä¸æç«¯çš„åœºæ™¯ä¸­ï¼‰ï¼Œä½†ä¹Ÿæœ‰äººåœ¨å¤šä¸ªå…¶ä»–å¹³å°ä¸Šåˆ›å»ºäº† [è®¸å¤šå…¶ä»–åº“](https://github.com/json5/json5/wiki/In-the-Wild)ã€‚

[æ„å»ºçŠ¶æ€]: https://app.travis-ci.com/json5/json5

[è¦†ç›–ç‡çŠ¶æ€]: https://coveralls.io/github/json5/json5

[JSON]: https://tools.ietf.org/html/rfc7159

[ECMAScript 5.1]: https://www.ecma-international.org/ecma-262/5.1/

## åŠŸèƒ½æ¦‚è§ˆ

JSON5 æ‰©å±•äº† JSONï¼ŒåŠ å…¥äº†ä»¥ä¸‹ ECMAScript 5.1 çš„ç‰¹æ€§ï¼ˆè¿™äº›ç‰¹æ€§åœ¨ JSON ä¸­ä¸æ”¯æŒï¼‰ï¼š

### å¯¹è±¡

* å¯¹è±¡é”®å¯ä»¥æ˜¯ ECMAScript 5.1 ä¸­çš„ *[IdentifierName]*ã€‚
* å¯¹è±¡å¯ä»¥æœ‰ä¸€ä¸ªå°¾éšé€—å·ã€‚

### æ•°ç»„

* æ•°ç»„å¯ä»¥æœ‰ä¸€ä¸ªå°¾éšé€—å·ã€‚

### å­—ç¬¦ä¸²

* å­—ç¬¦ä¸²å¯ä»¥ç”¨å•å¼•å·ã€‚
* å­—ç¬¦ä¸²å¯ä»¥é€šè¿‡è½¬ä¹‰æ¢è¡Œç¬¦æ¥è·¨å¤šè¡Œã€‚
* å­—ç¬¦ä¸²å¯ä»¥åŒ…å«è½¬ä¹‰å­—ç¬¦ã€‚

### æ•°å­—

* æ•°å­—å¯ä»¥æ˜¯åå…­è¿›åˆ¶ã€‚
* æ•°å­—å¯ä»¥æœ‰å‰å¯¼æˆ–åç¼€å°æ•°ç‚¹ã€‚
* æ•°å­—å¯ä»¥æ˜¯ [IEEE 754] çš„æ­£æ— ç©·å¤§ã€è´Ÿæ— ç©·å¤§å’Œ NaNã€‚
* æ•°å­—å¯ä»¥ä»¥æ˜¾å¼çš„åŠ å·å¼€å¤´ã€‚

### æ³¨é‡Š

* æ”¯æŒå•è¡Œå’Œå¤šè¡Œæ³¨é‡Šã€‚

### ç©ºç™½å­—ç¬¦

* å…è®¸æ›´å¤šçš„ç©ºç™½å­—ç¬¦ã€‚

[IdentifierName]: https://www.ecma-international.org/ecma-262/5.1/#sec-7.6

[IEEE 754]: http://ieeexplore.ieee.org/servlet/opac?punumber=4610933

## ç¤ºä¾‹

ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç‰¹æ€§çš„ç¤ºä¾‹ï¼š

```js
{
  // æ³¨é‡Š
  unquoted: 'and you can quote me on that',
  singleQuotes: 'I can use "double quotes" here',
  lineBreaks: "Look, Mom! \
No \\n's!",
  hexadecimal: 0xdecaf,
  leadingDecimalPoint: .8675309, andTrailing: 8675309.,
  positiveSign: +1,
  trailingComma: 'in objects', andIn: ['arrays',],
  "backwardsCompatible": "with JSON",
}
```

å¦ä¸€ä¸ªæ›´è´´è¿‘å®é™…çš„ç¤ºä¾‹æ¥è‡ª Chromium/Blink é¡¹ç›®çš„ [é…ç½®æ–‡ä»¶](https://github.com/chromium/chromium/blob/feb3c9f670515edf9a88f185301cbd7794ee3e52/third_party/blink/renderer/platform/runtime_enabled_features.json5)ã€‚

## è§„èŒƒ

å…³äº JSON5 æ ¼å¼çš„è¯¦ç»†è¯´æ˜ï¼Œè¯·é˜…è¯» [å®˜æ–¹è§„èŒƒ](https://json5.github.io/json5-spec/)ã€‚

## å®‰è£…ä¸ä½¿ç”¨

### Node.js

```sh
npm install json5
```

#### CommonJS

```js
const JSON5 = require('json5')
```

#### æ¨¡å—

```js
import JSON5 from 'json5'
```

### æµè§ˆå™¨

#### UMD

```html
<!-- è¿™ä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡ `JSON5` -->
<script src="https://unpkg.com/json5@2/dist/index.min.js"></script>
```

#### æ¨¡å—

```html
<script type="module">
  import JSON5 from 'https://unpkg.com/json5@2/dist/index.min.mjs'
</script>
```

## API

JSON5 çš„ API ä¸ [JSON API] å…¼å®¹ã€‚

[JSON API]: https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON

### JSON5.parse()

è§£æ JSON5 å­—ç¬¦ä¸²ï¼Œæ„é€ å­—ç¬¦ä¸²æè¿°çš„ JavaScript å€¼æˆ–å¯¹è±¡ã€‚å¯é€‰çš„ reviver å‡½æ•°å¯ç”¨äºåœ¨è¿”å›ç»“æœå‰å¯¹å¯¹è±¡è¿›è¡Œè½¬æ¢ã€‚

#### è¯­æ³•

```
JSON5.parse(text[, reviver])
```

#### å‚æ•°

* `text`: è¦è§£æä¸º JSON5 çš„å­—ç¬¦ä¸²ã€‚
* `reviver`: å¦‚æœæ˜¯å‡½æ•°ï¼Œè¯¥å‡½æ•°ç”¨äºåœ¨è¿”å›å€¼ä¹‹å‰å¯¹è§£æåçš„å€¼è¿›è¡Œè½¬æ¢ã€‚

#### è¿”å›å€¼

ä¸ç»™å®š JSON5 å­—ç¬¦ä¸²å¯¹åº”çš„å¯¹è±¡ã€‚

### JSON5.stringify()

å°† JavaScript å€¼è½¬æ¢ä¸º JSON5 å­—ç¬¦ä¸²ï¼Œå¦‚æœæŒ‡å®šäº† replacer å‡½æ•°ï¼Œåˆ™å¯é€‰æ‹©æ€§åœ°æ›¿æ¢å€¼ï¼›å¦‚æœæŒ‡å®šäº† replacer æ•°ç»„ï¼Œåˆ™åªåŒ…å«æŒ‡å®šçš„å±æ€§ã€‚

#### è¯­æ³•

```
JSON5.stringify(value[, replacer[, space]])
JSON5.stringify(value[, options])
```

#### å‚æ•°

* `value`: è¦è½¬æ¢ä¸º JSON5 å­—ç¬¦ä¸²çš„å€¼ã€‚
* `replacer`: ç”¨äºæ”¹å˜å­—ç¬¦ä¸²åŒ–è¡Œä¸ºçš„å‡½æ•°ï¼Œæˆ–ç”¨äºé€‰æ‹©/è¿‡æ»¤å¯¹è±¡å±æ€§çš„å­—ç¬¦ä¸²å’Œæ•°å­—æ•°ç»„ã€‚å¦‚æœè¯¥å€¼ä¸º null æˆ–æœªæä¾›ï¼Œåˆ™å¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½å°†åŒ…å«åœ¨è¾“å‡ºå­—ç¬¦ä¸²ä¸­ã€‚
* `space`: ç”¨äºåœ¨è¾“å‡º JSON5 å­—ç¬¦ä¸²ä¸­æ’å…¥ç©ºç™½ä»¥å¢å¼ºå¯è¯»æ€§ã€‚å¦‚æœè¯¥å€¼ä¸ºæ•°å­—ï¼Œè¡¨ç¤ºä½¿ç”¨å¤šå°‘ä¸ªç©ºæ ¼ä½œä¸ºç¼©è¿›ï¼ˆæœ€å¤§å€¼ä¸º 10ï¼‰ï¼›å¦‚æœå°äº 1ï¼Œåˆ™ä¸ä½¿ç”¨ç©ºæ ¼ã€‚å¦‚æœè¯¥å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™ä½¿ç”¨è¯¥å­—ç¬¦ä¸²ï¼ˆæˆ–å…¶å‰ 10 ä¸ªå­—ç¬¦ï¼‰ä½œä¸ºç¼©è¿›ã€‚å¦‚æœæœªæä¾›ï¼ˆæˆ–ä¸º nullï¼‰ï¼Œåˆ™ä¸ä½¿ç”¨ç¼©è¿›ã€‚å¦‚æœä½¿ç”¨ç¼©è¿›ï¼Œåˆ™å¯¹è±¡å’Œæ•°ç»„ä¸­å°†åŒ…å«å°¾éšé€—å·ã€‚
* `options`: åŒ…å«ä»¥ä¸‹å±æ€§çš„å¯¹è±¡ï¼š
  * `replacer`: åŒ `replacer` å‚æ•°ã€‚
  * `space`: åŒ `space` å‚æ•°ã€‚
  * `quote`: ç”¨äºåºåˆ—åŒ–å­—ç¬¦ä¸²çš„å¼•å·å­—ç¬¦ã€‚

#### è¿”å›å€¼

è¡¨ç¤ºè¯¥å€¼çš„ JSON5 å­—ç¬¦ä¸²ã€‚

### Node.js ä¸­é€šè¿‡ `require()` åŠ è½½ JSON5 æ–‡ä»¶

åœ¨ Node.js ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡æ·»åŠ ä»¥ä¸‹è¯­å¥æ¥ä½¿ç”¨ `require()` åŠ è½½ JSON5 æ–‡ä»¶ï¼š

```js
require('json5/lib/register')
```

ç„¶åä½ å¯ä»¥é€šè¿‡ Node.js çš„ `require()` åŠ è½½ JSON5 æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š

```js
const config = require('./config.json5')
```

## å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰

ç”±äº JSON æ¯” JSON5 æ›´å¹¿æ³›ä½¿ç”¨ï¼Œæœ¬åŒ…åŒ…å«ä¸€ä¸ª CLI å·¥å…·ï¼Œç”¨äºå°† JSON5 è½¬æ¢ä¸º JSONï¼Œä»¥åŠéªŒè¯ JSON5 æ–‡æ¡£çš„è¯­æ³•ã€‚

### å®‰è£…

```sh
npm install --global json5
```

### ä½¿ç”¨

```sh
json5 [é€‰é¡¹] <æ–‡ä»¶>
```

å¦‚æœæ²¡æœ‰æä¾› `<æ–‡ä»¶>`ï¼Œåˆ™ä»æ ‡å‡†è¾“å…¥ï¼ˆSTDINï¼‰è¯»å–ã€‚

#### é€‰é¡¹ï¼š

* `-s`, `--space`: ç¼©è¿›ä½¿ç”¨çš„ç©ºæ ¼æ•°ï¼Œæˆ–ä½¿ç”¨ `t` è¡¨ç¤ºåˆ¶è¡¨ç¬¦
* `-o`, `--out-file [æ–‡ä»¶]`: è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶ï¼Œå¦åˆ™è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼ˆSTDOUTï¼‰
* `-v`, `--validate`: éªŒè¯ JSON5 ä½†ä¸è¾“å‡º JSON
* `-V`, `--version`: è¾“å‡ºç‰ˆæœ¬å·
* `-h`, `--help`: è¾“å‡ºä½¿ç”¨è¯´æ˜

## è´¡çŒ®

### å¼€å‘

```sh
git clone https://github.com/json5/json5
cd json5
npm install
```

è´¡çŒ®ä»£ç æ—¶ï¼Œè¯·ç¼–å†™ç›¸å…³æµ‹è¯•å¹¶åœ¨æäº¤ pull request å‰è¿è¡Œ `npm test` å’Œ `npm run lint`ã€‚è¯·ä½¿ç”¨æ”¯æŒ [EditorConfig](http://editorconfig.org/) çš„ç¼–è¾‘å™¨ã€‚

### é—®é¢˜åé¦ˆ

å¦‚éœ€æŠ¥å‘Š JSON5 **æ•°æ®æ ¼å¼**ç›¸å…³çš„é—®é¢˜æˆ–è¯·æ±‚æ–°åŠŸèƒ½ï¼Œè¯·æäº¤åˆ°å®˜æ–¹çš„ **[*è§„èŒƒ*ä»“åº“](https://github.com/json5/json5-spec)**ã€‚

è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä¸ä¼šæ·»åŠ ä»»ä½•å¯¼è‡´ JSON5 ä¸ ES5 ä¸å…¼å®¹çš„åŠŸèƒ½ï¼›ä¸ ES5 çš„å…¼å®¹æ€§æ˜¯ JSON5 çš„åŸºæœ¬å‰æã€‚[\*](#ecmascript-å…¼å®¹æ€§)

å¦‚éœ€æŠ¥å‘Šæœ¬ **JavaScript å®ç°** çš„é—®é¢˜æˆ–è¯·æ±‚æ–°åŠŸèƒ½ï¼Œè¯·æäº¤åˆ° **æœ¬ä»“åº“**ã€‚

### å®‰å…¨æ¼æ´ä¸æŠ«éœ²

å¦‚éœ€æŠ¥å‘Šå®‰å…¨æ¼æ´ï¼Œè¯·éµå¾ªæˆ‘ä»¬ [å®‰å…¨ç­–ç•¥](https://github.com/json5/json5/tree/main/SECURITY.md) ä¸­çš„æŒ‡å—ã€‚

## ECMAScript å…¼å®¹æ€§

å°½ç®¡ JSON5 æ—¨åœ¨ä¸ ES5 å®Œå…¨å…¼å®¹ï¼Œä½†æœ‰ä¸€ä¸ªä¾‹å¤–ï¼šJSON å’Œ JSON5 éƒ½å…è®¸åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨æœªè½¬ä¹‰çš„è¡Œåˆ†éš”ç¬¦å’Œæ®µè½åˆ†éš”ç¬¦ï¼ˆU+2028 å’Œ U+2029ï¼‰ï¼Œä½† ES5 ä¸å…è®¸ã€‚ä¸€é¡¹ [ææ¡ˆ](https://github.com/tc39/proposal-json-superset) å·²è¢«çº³å…¥ ES2019ï¼Œå…è®¸åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨è¿™äº›å­—ç¬¦ï¼Œä½¿ JSON å’Œ JSON5 ä¸ ES2019 å®Œå…¨å…¼å®¹ã€‚

## è®¸å¯è¯

MITã€‚è¯¦è§ [LICENSE.md](https://github.com/json5/json5/tree/main/LICENSE.md)ã€‚

## è‡´è°¢

[Aseem Kishore](https://github.com/aseemk) åˆ›å»ºäº†æœ¬é¡¹ç›®ã€‚ä»–å†™äº†ä¸€ç¯‡ [åšå®¢æ–‡ç« ](https://aseemk.substack.com/p/ignore-the-f-ing-haters-json5)ï¼Œè®°å½•äº†è¯¥é¡¹ç›® 10 å¹´çš„å‘å±•å†ç¨‹ä¸ç»éªŒæ•™è®­ã€‚

[Michael Bolin](http://bolinfest.com/) ç‹¬ç«‹æå‡ºäº†éƒ¨åˆ†ç›¸åŒçš„æƒ³æ³•ï¼Œå¹¶è¿›è¡Œäº†ç²¾å½©çš„è§£é‡Šã€‚æ¨èé˜…è¯»ï¼š[Suggested Improvements to JSON](http://bolinfest.com/essays/json.html)

[Douglas Crockford](http://www.crockford.com/) å½“ç„¶è®¾è®¡å¹¶åˆ›å»ºäº† JSONï¼Œä½†ä»–åœ¨ [JSON ç½‘ç«™](http://json.org/) ä¸Šçš„çŠ¶æ€æœºå›¾ï¼Œå°½ç®¡å¬èµ·æ¥æœ‰ç‚¹è€å¥—ï¼Œå´æ¿€åŠ±å¹¶å¢å¼ºäº†æˆ‘ä»¬æ„å»ºæ–°è§£æå™¨ä»¥å®ç°è¿™äº›æƒ³æ³•çš„ä¿¡å¿ƒï¼JSON5 çš„åŸå§‹å®ç°ä¹Ÿç›´æ¥å‚è€ƒäº† Doug çš„å¼€æº [json_parse.js][json_parse.js] è§£æå™¨ã€‚æˆ‘ä»¬éå¸¸æ„Ÿè°¢ä»–å¹²å‡€ä¸”æ–‡æ¡£å®Œå–„çš„ä»£ç ã€‚

[json_parse.js]: https://github.com/douglascrockford/JSON-js/blob/03157639c7a7cddd2e9f032537f346f1a87c0f6d/json_parse.js

[Max Nanasy](https://github.com/MaxNanasy) å¾ˆæ—©å°±ç§¯æå‚ä¸è´¡çŒ®ï¼Œæå‡ºäº†å¤šä¸ªè¡¥ä¸å’Œå»ºè®®ã€‚

[Andrew Eisenberg](https://github.com/aeisenberg) è´¡çŒ®äº†åŸå§‹çš„ `stringify` æ–¹æ³•ã€‚

Jordan Tucker å¯¹é½äº† JSON5 ä¸ ES5 çš„è¯­æ³•ï¼Œç¼–å†™äº† JSON5 çš„å®˜æ–¹è§„èŒƒï¼Œå®Œå…¨é‡å†™äº†ä»£ç åº“ï¼Œå¹¶æŒç»­ç»´æŠ¤è¯¥é¡¹ç›®ã€‚